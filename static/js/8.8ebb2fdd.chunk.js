(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{125:function(e,t,a){"use strict";a.d(t,"i",function(){return r}),a.d(t,"g",function(){return o}),a.d(t,"j",function(){return c}),a.d(t,"h",function(){return s}),a.d(t,"f",function(){return i}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return u}),a.d(t,"c",function(){return h}),a.d(t,"d",function(){return m}),a.d(t,"e",function(){return p});var n=a(25),r=(a(26),function(e){return fetch(n.a.base_api+"subscriptions/returning",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})}),o=function(e){return fetch(n.a.base_api+"subscriptions/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})},c=function(e,t){return fetch(n.a.base_api+"subscriptions/pay_mpesa",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})},s=function(e,t){return fetch(n.a.base_api+"subscriptions/renew/account",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})},i=function(e){return fetch(n.a.base_api+"subscriptions/renew/done",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({})}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})},l=function(e){return fetch(n.a.base_api+"subscriptions/is/paid",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({})}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})},u=function(e,t){return fetch(n.a.base_api+"webdata/lang/videos",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})},h=function(e,t){return fetch(n.a.base_api+"webdata/lang/data",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})},m=function(e,t){return fetch(n.a.base_api+"webdata/math/videos",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})},p=function(e,t){return fetch(n.a.base_api+"webdata/math/data",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){return Promise.reject(e)})}},133:function(e,t,a){e.exports=a.p+"static/media/background_1920-18.acfe7046.jpg"},134:function(e,t,a){e.exports=a.p+"static/media/background_640-1.1420d15b.jpg"},135:function(e,t,a){e.exports=a.p+"static/media/background_640-3.55e47e98.jpg"},137:function(e,t,a){"use strict";var n=a(8),r=a(1),o=a.n(r),c=(a(17),a(21)),s=a(28),i=a(3),l=a.n(i),u={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6","display-1":"h1","display-2":"h1","display-3":"h1","display-4":"h1",p:"p",lead:"p",blockquote:"blockquote"},h=function(e){var t,a=e.tag,r=e.className,c=e.type,i=Object(n.a)(e,["tag","className","type"]),h=l()(Object(s.a)({},c,!!c),r);return t=a||(!a&&u[c]?u[c]:"p"),o.a.createElement(t,Object.assign({},i,{className:h}))};h.defaultProps={type:"p"};var m=h,p=c.a.create("page"),d=function(e){var t=e.title,a=(e.breadcrumbs,e.tag),r=e.className,c=e.children,s=Object(n.a)(e,["title","breadcrumbs","tag","className","children"]),i=p.b("px-3",r);return o.a.createElement(a,Object.assign({className:i},s),o.a.createElement("div",{className:p.e("header")},t&&"string"===typeof t?o.a.createElement(m,{type:"h1",className:p.e("title")}):t),c)};d.defaultProps={tag:"div",title:""};t.a=d},139:function(e,t,a){e.exports=a.p+"static/media/background_1920-11.b7f68e8a.jpg"},142:function(e,t,a){e.exports=a.p+"static/media/landing-2-image.f6047695.png"},220:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a(9),o=a(10),c=a(12),s=a(11),i=a(13),l=(a(139),a(142)),u=a.n(l),h=(a(133),a(134),a(135),a(40),a(42),a(137)),m=a(1),p=a.n(m),d=a(41),f=a(26),g=a.n(f),b=a(25),y=a(125),j=a(110),E=a(111),w=a(96),O=a(97),P=a(98),v=a(225),N=a(87),S=a(88),_=a(89),T=a(90),C=a(91),A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleFinishPay=function(){a.setState(Object(n.a)({},a.state,{preload:!0}));var e=a.state.xtoken;Object(y.a)(e).then(function(e){return 200===e.status?1===e.paid?void(window.location.href="/child/home"):void a.setState(Object(n.a)({},a.state,{msg:"PENDING PAYMENT: Your payment has not completed yet.",error:"",showtryagain:!0,showform:!1,showFinishPay:!1,preload:!1})):void a.setState(Object(n.a)({},a.state,{error:e.message,msg:"",showtryagain:!1,showform:!1,showFinishPay:!0,preload:!1}))}).catch(function(e){a.setState(Object(n.a)({},a.state,{msg:"",error:"Connection error",preload:!1}))})},a.handleTryAgain=function(){var e={phone:a.state.g_phone},t=a.state.xtoken;Object(y.j)(t,e).then(function(e){return 200===e.status?void a.setState(Object(n.a)({},a.state,{preload:!1,error:"",msg:e.message,showform:!1,showtryagain:!1,showFinishPay:!0})):void a.setState(Object(n.a)({},a.state,{preload:!1,error:e.message,msg:"",showform:!1,showtryagain:!0,showFinishPay:!1}))}).catch(function(e){console.log("error occured",e),a.setState(Object(n.a)({},a.state,{preload:!1,error:"Connection error occured. Try again",msg:"",showform:!1,showtryagain:!0,showFinishPay:!1}))})},a.handleGEmailInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{g_email:t}))},a.handleGPhoneInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{g_phone:t}))},a.handleCNameInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{account_name:t}))},a.handleInitiateTransaction=function(e){var t={account_name:a.state.account_name,app:a.state.app,g_email:a.state.g_email,g_phone:a.state.g_phone};a.setState(Object(n.a)({},a.state,{preload:!0})),Object(y.g)(t).then(function(e){return console.log("what came",e),204===e.status?(g.a.setItem(b.a.secret,JSON.stringify(e)).then(function(e){}).catch(function(e){}),void a.setState(Object(n.a)({},a.state,{preload:!1,xtoken:e.user.token,error:"PAYMENT ERROR:: "+e.message,msg:"",showform:!1,showtryagain:!0,showFinishPay:!1}))):200===e.status?(g.a.setItem(b.a.secret,JSON.stringify(e)).then(function(e){}).catch(function(e){}),void a.setState(Object(n.a)({},a.state,{preload:!1,xtoken:e.user.token,error:"",msg:e.message,showform:!1,showtryagain:!1,showFinishPay:!0}))):void a.setState(Object(n.a)({},a.state,{preload:!1,error:e.message,msg:"",showform:!0,showtryagain:!1,showFinishPay:!1}))}).catch(function(e){console.log("error occured",e),a.setState(Object(n.a)({},a.state,{preload:!1,error:"Connection error occured. Try again",msg:"",showform:!0,showtryagain:!1,showFinishPay:!1}))})},a.state={app:"",selected_app:"",account_name:"",g_email:"",g_phone:"",xtoken:"",msg:"",error:"",preload:!1,showform:!0,showtryagain:!1,showFinishPay:!1},g.a.getItem("app_code").then(function(e){if(null!==e){var t=JSON.parse(e);console.log(t),a.setState(Object(n.a)({},a.state,{app:t.app_code,selected_app:t.app_name}))}}).catch(function(e){console.log("storage error",e)}),a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return p.a.createElement(h.a,{title:"Cards",breadcrumbs:[{name:"cards",active:!0}]},p.a.createElement(j.a,null,p.a.createElement(E.a,{md:8,sm:8,xs:12,className:"mb-3"},p.a.createElement(w.a,{className:"flex-row text-center card-uncurved"},p.a.createElement(O.a,null,p.a.createElement(P.a,null,p.a.createElement("h1",null,"Step ",p.a.createElement("b",null,"2/2")," - Child info & Payment ",p.a.createElement("br",null))),p.a.createElement(P.a,null,p.a.createElement("h4",{className:"h4-custom"},"(APP: ",this.state.selected_app,")")),p.a.createElement("small",null,"You are almost done, enter parent/guardian email, phone and child name "),this.state.preload&&p.a.createElement(P.a,null,p.a.createElement(d.a,null)),this.state.error.length>0&&p.a.createElement(v.a,{color:"danger"},this.state.error),this.state.msg.length>0&&p.a.createElement(v.a,{color:"success"},this.state.msg),p.a.createElement("br",null),p.a.createElement("div",{className:"row justify-content-center"},p.a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-12"},p.a.createElement(N.a,null,!0===this.state.showform&&p.a.createElement("div",null,p.a.createElement(S.a,null,p.a.createElement(_.a,null,"Guardian/Parent Email"),p.a.createElement(T.a,{onChange:this.handleGEmailInput,value:this.state.g_email,type:"email",name:"em",placeholder:""})),p.a.createElement(S.a,null,p.a.createElement(_.a,null,"Guardian/Parent ",p.a.createElement("b",null,"Mpesa")," Phone"),p.a.createElement(T.a,{onChange:this.handleGPhoneInput,value:this.state.g_phone,type:"number",name:"phone",placeholder:""})),p.a.createElement(S.a,null,p.a.createElement(_.a,null,"Child Name"),p.a.createElement(T.a,{onChange:this.handleCNameInput,value:this.state.account_name,type:"text",name:"cname",placeholder:""})),p.a.createElement("br",null),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},p.a.createElement("a",{href:"/new/account",className:"btn-custom bones btn btn-secondary"},"Previous")),p.a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},p.a.createElement(C.a,{onClick:this.handleInitiateTransaction,className:"btn-custom"},"Finish")))),!0===this.state.showtryagain&&p.a.createElement("div",{className:"row justify-content-center"},p.a.createElement("div",{className:"col-md-8 col-sm-12 col-xs-12"},p.a.createElement(S.a,null,p.a.createElement(_.a,null,p.a.createElement("b",null,"Mpesa")," Phone number"),p.a.createElement(T.a,{onChange:this.handleGPhoneInput,value:this.state.g_phone,type:"number",name:"phone",placeholder:""})),p.a.createElement(C.a,{onClick:this.handleTryAgain,className:"btn-custom"},"Try Paying again"))),!0===this.state.showFinishPay&&p.a.createElement("div",{className:"row justify-content-center"},p.a.createElement("div",{className:"col-md-8 col-sm-12 col-xs-12"},p.a.createElement("p",null,"If you have paid and received MPESA message, click on button below to finish"),p.a.createElement(C.a,{onClick:this.handleFinishPay,className:"btn-custom"},"Click here to complete"))))))))),p.a.createElement(E.a,{md:4,sm:4,xs:12,className:"mb-0"},p.a.createElement("img",{width:400,src:u.a}))))}}]),t}(p.a.Component);t.default=A}}]);
//# sourceMappingURL=8.8ebb2fdd.chunk.js.map